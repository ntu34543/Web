function _slicedToArray(s,e){return _arrayWithHoles(s)||_iterableToArrayLimit(s,e)||_unsupportedIterableToArray(s,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(s,e){if(s){if("string"==typeof s)return _arrayLikeToArray(s,e);var o=Object.prototype.toString.call(s).slice(8,-1);return"Object"===o&&s.constructor&&(o=s.constructor.name),"Map"===o||"Set"===o?Array.from(s):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(s,e):void 0}}function _arrayLikeToArray(s,e){(null==e||e>s.length)&&(e=s.length);for(var o=0,t=new Array(e);o<e;o++)t[o]=s[o];return t}function _iterableToArrayLimit(s,e){var o=null==s?null:"undefined"!=typeof Symbol&&s[Symbol.iterator]||s["@@iterator"];if(null!=o){var t,i,a=[],n=!0,r=!1;try{for(o=o.call(s);!(n=(t=o.next()).done)&&(a.push(t.value),!e||a.length!==e);n=!0);}catch(s){r=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return a}}function _arrayWithHoles(s){if(Array.isArray(s))return s}function _typeof(s){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(s)}var ssw_is_auth_page=location.pathname.indexOf("/account")>-1,ssw_message_selector=ssw_is_auth_page?'form[action*="/account"]:not(#he_customer_login, #he_create_customer)':"#login_modal .login-failed";if(window.storeFrontRecaptchaV3ScriptUrl="https://cdn.shopify.com/shopifycloud/storefront-recaptcha-v3/v0.6/index.js",window.showLoginPopupLoader=function(){ssw(".ssw-login form").css("opacity","0.3"),ssw(".ssw-login form input").removeAttr("enabled").attr("disabled","disabled"),ssw(".ssw-signup-loading").show(),ssw(".he-login").css("opacity","0.3"),ssw(".he-login input").removeAttr("enabled").attr("disabled","disabled"),ssw(".ssw-login-loading").show()},window.hideLoginPopupLoader=function(){ssw(".ssw-login form").css("opacity","1"),ssw(".ssw-login form input").removeAttr("disabled").attr("enabled","enabled"),ssw(".ssw-signup-loading").hide(),ssw(".he-login").css("opacity","1"),ssw(".he-login input").removeAttr("disabled").attr("enabled","enabled"),ssw(".ssw-login-loading").hide()},window.targetSEMModal=function(s,e){var o,t="";if(s.first_name&&(t+=s.first_name+" "),s.last_name&&(t+=s.last_name),"invited"===s.state)ssw("#sem_btn").hide(),ssw("#sem_forgot").hide(),ssw("#sem_password").hide(),o=sswLangs.t("already_registered_and_sent_invite_message",{email:s.email,service_name:e});else if("enabled"!=s.state)ssw("#sem_btn").hide(),ssw("#sem_forgot").hide(),s.account_activation_token&&s.email?(o=sswLangs.t("already_registered_to_social_service",{email:s.email,service_name:e}),ssw("#sem_modal_form").data("account-activation",{customer_id:s.customer_id,token:s.account_activation_token})):(ssw("#sem_password").hide(),o=sswLangs.t("incorrect_credentials",[s.email,e]));else{if(_typeof(window.ssw.usercheckResponse.multipass_enabled)&&window.ssw.usercheckResponse.multipass_enabled)return void(new ShopifyLogin).multiPassLogin();o=sswLangs.t("already_registered_to_social_service",{email:s.email,service_name:e})}if(hideLoginPopupLoader(),ssw("#social_exist_modal .ssw-img-circle").hasClass("ssw-hide")||ssw("#social_exist_modal .ssw-img-circle").addClass("ssw-hide"),s.photo_url){var i=new Image;i.onload=function(){ssw("#social_exist_modal .ssw-img-circle").removeClass("ssw-hide"),ssw("#social_exist_modal .ssw-img-circle").attr("src",s.photo_url)},i.src=s.photo_url}ssw("#sem_name").html(t),ssw("#sem_email").val(s.email),ssw("#sem_text").html(o),ssw("#login_modal").sswModal("hide"),ssw("#social_exist_modal").sswModal()},void 0===sswApp.customer){var service_id=0,sl=0,sswSocialLogin=0;window.sswCreateAccount=function(){var s=ssw("#accept-terms-modal").data("own-app");if(ssw("#ssw-create-account-button").attr("disabled","disabled"),ssw("#ssw-create-account-button").siblings("#ssw-cancel-account-button").attr("disabled","disabled"),!s)return ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/acceptTerms",data:{_sid:ssw.cookie("hesid"),service_id:ssw("#ssw-accept-terms-service_id").val(),accepts_marketing:ssw("#ssw-accept-marketing-checkbox")[0].checked,accept_terms:ssw("#ssw-accept-terms-checkbox")[0].checked,email:ssw("#terms-email-input").val()},success:function(s){switch(s.error){case 0:var e=new ShopifyLogin;e.preLogin(s.email,s.password),e.login({verified:s.verified});break;case 1:if(s.user){var o=[];s.user.twitter||o.push(".ssw-twconnect"),s.user.tumblr||o.push(".ssw-tmconnect"),s.user.instagram||o.push(".ssw-inconnect");var t=ssw("#login_modal");t.find(o.join()).hide(),t.sswModal("show"),addMessage(ssw_message_selector,sswLangs.t("this_email_is_already_used"),"info")}}},dataType:"json"}),!1;(new ShopifyLogin).setServiceUser(s.user,s.service)},window.sswCancelAccount=function(){ssw("#accept-terms-modal").sswModal("hide"),hideLoginPopupLoader()},window.sswOnAcceptTerms=function(s){"accept_terms"===s.name?s.checked?(ssw("#ssw-cancel-account-button").hide(),ssw("#ssw-create-account-button").show()):(ssw("#ssw-cancel-account-button").show(),ssw("#ssw-create-account-button").hide()):"terms"===s.name&&(s.checked?(ssw("#hesy-sign-up-cancel").hide(),ssw("#hesy-sign-up-submit").show()):(ssw("#hesy-sign-up-cancel").show(),ssw("#hesy-sign-up-submit").hide()))},window.sswOnAcceptMarketing=function(s){"accepts_marketing"===s.name&&(s.checked?ssw("#ssw-customer-accepts_marketing").val(!0):ssw("#ssw-customer-accepts_marketing").val(!1))},window.sswOnAcceptMarketingRegisterPage=function(s){"accepts_marketing"==s.name&&(s.checked?ssw(".ssw-accept-marketing__input_hidden").val(!0):ssw(".ssw-accept-marketing__input_hidden").val(!1))},window.showAcceptTermsForm=function(s,e,o){e?(ssw("#accept-terms-modal").data("own-app",{user:o,service:e}),ssw(".terms-email-group").hide()):ssw("#accept-terms-modal").removeData("own-app"),ssw("#signup_modal").sswModal("hide"),ssw("#login_modal").sswModal("hide"),s.service_id&&ssw("#ssw-accept-terms-service_id").val(s.service_id),s.email&&(ssw("#terms-email-input").val(s.email),ssw(".terms-email-group").hide()),s.termsLink&&(ssw("#accept-terms-modal .terms-link").attr("href",s.termsLink).show(),ssw("#accept-terms-modal .terms-span").hide()),s.termsSignup||(ssw(".accept_terms-group").hide(),ssw("#ssw-create-account-button").show(),ssw("#accept-terms-modal .ssw-h3").text(sswLangs.t("accept_marketing"))),hideLoginPopupLoader(),ssw("#accept-terms-modal").sswModal()},window.addEventListener("sswoauthcallback",(function(s){if(s.detail&&-1!==["twitter","tumblr","instagram"].indexOf(s.detail.service)){var e=s.detail.service;ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/shopCallback",dataType:"json",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token"),service:e},success:function(s){var o;sswSocialLogin=1,void 0!==s.service_id&&(service_id=s.service_id),ssw.isEmptyObject(s)?hideLoginPopupLoader():s.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==s.new&&1===s.new?showAcceptTermsForm(s):s.password?s.isOldCustomer?targetSEMModal(s,e):((o=new ShopifyLogin).preLogin(s.email,s.password),o.login({verified:s.verified})):void 0!==s.user_id&&s.user_id&&_typeof(window.ssw.usercheckResponse.multipass_enabled)&&window.ssw.usercheckResponse.multipass_enabled?(o=new ShopifyLogin).multiPassLogin():(hideLoginPopupLoader(),ssw("#service_id").val(s.service_id),ssw(".ssw-modal").sswModal("hide"),s.email?targetSEMModal(s,e):ssw("#set-email-modal").sswModal())}})}})),window.shopCallback4TTI=function(s,e){showLoginPopupLoader();var o=sswProxyUrl+"/lite2/auth/"+s+"?_sid="+ssw.cookie("hesid")+"&verify_token="+ssw.cookie("ssw_verify_token")+"&shop="+encodeURIComponent(Shopify.shop);sswIsWebView()?(o+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=o):ssw.oauthpopup({path:o,callback:function(){sswDispatchEvent("sswoauthcallback",{detail:{service:e},bubbles:!0,cancellable:!1})}})},window.loginLoader=function(){ssw(".ssw-modal").sswModal("hide"),ssw("body").prepend('<div style="background: none repeat scroll 0 0 rgba(255, 255, 255, 0.77);height: 100%;position: fixed;width: 100%;z-index: 999;"><div class="ssw-login-loading" id="ssw-login-loader"> <span class="ssw-spin ssw-loader"></span> </div> </div>'),ssw("#ssw-login-loader").css("opacity",1),ssw("#ssw-login-loader").css({position:"fixed",top:"50%",left:"50%"})},window.loginLoaderCancel=function(){ssw("#ssw-login-loader").parent().remove()},window.addMessage2SetMailForm=function(s){var e=ssw("#set-email-error");e.html(s),e.show()};var addMessage=function(s,e,o){o=void 0!==o?"ssw-alert-"+o:"",ssw(s).prepend('<div class="ssw-alert '+o+' ssw-fade ssw-in"><button class="ssw-close" data-dismiss="ssw-alert">&times;</button>'+e+"</div>")};window.validateLogin=function(){Promise.all([Ssw.gwAssetsManifestLoader.requireByKey("lib.popover.js","SCRIPT"),Ssw.gwAssetsManifestLoader.requireByKey("lib.validate.js","SCRIPT")]).then((function(){var s=ssw("#sem_modal_form");s.validate({rules:{password:{required:!0}},highlight:function(s){ssw(s).closest(".ssw-control-group").addClass("ssw-error")},success:function(s){ssw(s).closest(".ssw-control-group").removeClass("ssw-error")},submitHandler:function(){var e=new ShopifyLogin,o=ssw("#sem_email").val(),t=ssw("#sem_password").val();ssw.cookie("ssw_verify_token",sswMd5(t+btoa(o)),{expires:30,path:"/",secure:"https:"===location.protocol,samesite:"Lax"}),e.preLogin(o,t);var i=s.data("account-activation");"object"===_typeof(i)?(i.customer={password:t,password_confirmation:t},e.login(i),s.data("account-activation",!1)):e.login()}}),ssw("#set-email-form").validate({rules:{email:{required:!0,email:!0}},highlight:function(s){ssw(s).closest(".ssw-control-group").addClass("ssw-error")},success:function(s){ssw(s).closest(".ssw-control-group").removeClass("ssw-error")},submitHandler:function(){ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/setEmail",data:{_sid:ssw.cookie("hesid"),verify_token:ssw.cookie("ssw_verify_token"),service_id:ssw("#service_id").val(),email:ssw("#set-email-input").val()},success:function(s){switch(s.error){case 0:var e=new ShopifyLogin;e.preLogin(s.email,s.password),e.login({verified:s.verified});break;case 1:if(s.user){var o=[];s.user.twitter||o.push(".ssw-twconnect"),s.user.tumblr||o.push(".ssw-tmconnect"),s.user.instagram||o.push(".ssw-inconnect");var t=ssw("#login_modal");t.find(o.join()).hide(),t.sswModal("show"),addMessage(ssw_message_selector,sswLangs.t("this_email_is_already_used"),"info")}break;case 2:addMessage2SetMailForm(sswLangs.t("incorrect_data"));break;case 3:addMessage2SetMailForm(sswLangs.t("tumblr_user_not_found"));break;case 4:addMessage2SetMailForm(sswLangs.t("not_created_customer_on_shopify"));break;case 5:addMessage2SetMailForm(sswLangs.t("problem_on_create_user"))}},dataType:"json"})}}),ssw("#he_create_customer").validate({rules:{email:{required:!0,email:!0}},highlight:function(s){ssw(s).closest(".ssw-control-group").addClass("ssw-error")},success:function(s){ssw(s).closest(".ssw-control-group").removeClass("ssw-error")},submitHandler:function(){(new ShopifyLogin).signUp()}}),ssw("#he_customer_login").validate({rules:{"customer[email]":{required:!0,email:!0},"customer[password]":{required:!0,minlength:1}},highlight:function(s){ssw(s).closest(".ssw-control-group").addClass("ssw-error")},success:function(s){ssw(s).closest(".ssw-control-group").removeClass("ssw-error")},submitHandler:function(){(new ShopifyLogin).login()}})}))},window.serviceUserChecker=function(s,e){FB.api("/me",{fields:"id,email"},(function(o){ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/service",data:{_sid:ssw.cookie("hesid"),user_id:s.authResponse.userID,email:o.email,service:e,access_token:s.authResponse.accessToken,hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")},success:function(o){var t=new ShopifyLogin;void 0!==o.service_id&&(service_id=o.service_id),o.status?o.password&&o.email?(sswSocialLogin=1,sl=1,t.preLogin(o.email,o.password),o.account_activation_token?t.login({customer_id:o.customer_id,token:o.account_activation_token,verified:o.verified,service:e,customer:{password:o.password,password_confirmation:o.password}}):t.login({verified:o.verified,service:e})):targetSEMModal(o,"facebook"):o.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==o.new&&1===o.new?showAcceptTermsForm(o,"facebook",s):o.isOldCustomer?targetSEMModal(o,"facebook"):t.setServiceUser(s,"facebook")},dataType:"json"})}))};var ShopifyLogin=function s(){var e="/account",o=this;this.check_customer_count=0,this.preLogin=function(s,e){ssw("#ssw-customer-email").val(s),ssw("#ssw-customer-password").val(e)},this.setServiceUser=function(e,t){if("facebook"===t){var i=e;FB.api("/me",{fields:"id,email,first_name,gender,last_name,link,locale,name,timezone,updated_time,verified"},(function(e){ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/setService",data:{user_id:i.authResponse.userID,access_token:i.authResponse.accessToken,user:e,service:t,_sid:ssw.cookie("hesid"),verify_token:ssw.cookie("ssw_verify_token"),accepts_marketing:!ssw.usercheckResponse.acceptMarketing||ssw("#ssw-accept-marketing-checkbox")[0].checked},success:function(t){if(service_id=t.service_id,0===t.user_id)hideLoginPopupLoader(),t.email?(ssw(".ssw-socialconnect").remove(),ssw("div.ssw-alert").remove(),ssw("#ssw-first_name").val(e.first_name).show(),ssw("#ssw-last_name").val(e.last_name).show(),ssw("#ssw-email").val(e.email),ssw("#login_modal").sswModal("hide"),ssw("#signup_modal").sswModal("show")):(ssw("#service_id").val(t.service_id),ssw(".ssw-modal").sswModal("hide"),ssw("#set-email-modal").sswModal());else if("enabled"!=t.state)if(t.password&&t.email){var i=new s;i.preLogin(t.email,t.password),t.account_activation_token?i.login({customer_id:t.customer_id,token:t.account_activation_token,verified:t.verified,customer:{password:t.password,password_confirmation:t.password}}):i.login({verified:t.verified})}else targetSEMModal(t,"Facebook");else!t.password&&t.email?targetSEMModal(t):(o.preLogin(t.email,t.password),o.login())},dataType:"json"})}))}else if("gplus"===t){var a=ssw.extend(e.gplusData,{_sid:ssw.cookie("hesid"),hash_key:sswCookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")});e.response;ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/glogin",data:a,success:function(s){sswSocialLogin=1,service_id=s.service_id,0===s.user_id?(hideLoginPopupLoader(),ssw(ssw(".socialconnect")[1]).prev().remove(),ssw(ssw(".socialconnect")[1]).next().remove(),ssw(ssw(".socialconnect")[1]).next().remove(),ssw(ssw(".socialconnect")[1]).remove(),ssw("div.ssw-alert").remove(),ssw("#ssw-first_name").val(a.first_name),ssw("#ssw-last_name").val(a.last_name),ssw("#ssw-email").val(a.email),ssw("#login_modal").sswModal("hide"),ssw("#signup_modal").sswModal("show")):"enabled"!=s.state?targetSEMModal(s,"gplus"):s.password?(o.preLogin(s.email,s.password),o.login()):targetSEMModal(s,"gplus")},dataType:"json"})}},this.prepareFormNode=function(s,e,o,t,i){var a=s[0];s.hide(),ssw(document.body).append(s),e&&-1!==e.indexOf("checkout.shopify.com")||s.attr("action",a.action.replace(location.protocol,i)+o);var n=ssw('<input type="hidden" name="checkout_url" />');for(var r in e&&n.val(e),s.append(n),t)if(t.hasOwnProperty(r)){var c=t[r],l=s.find('input[name="'+c.name+'"]');l.length&&(l.removeAttr("disabled"),l.val(c.value))}return a},this.addRecaptchaTokenAndSubmitForm=function(s,e,t,i,a){window.grecaptcha.execute(window.Shopify.recaptchaV3.siteKey,{action:"customer_login"}).then((function(n){(s.append('<input type="hidden" name="recaptcha-v3-token" value="'.concat(n,'"/>')),s[0])&&o.prepareFormNode(s,e,t,i,a).submit()}))},this.redirectAfterAuth=function(s,e,o){localStorage.removeItem("ssw-helpers-content");var t=this;if(navigator.userAgent.indexOf("MSIE")>-1&&o)location.href=o;else{var i=(navigator.userAgent.indexOf("Chrome")>-1||-1===navigator.userAgent.indexOf("Safari"))&&-1===navigator.userAgent.indexOf("Firefox")&&"https:"===location.protocol,a=location.protocol;i&&(a="http:"===location.protocol?"https:":"http:");var n=s.clone();n.attr("id","ssw-test-login"),n.find("input").removeAttr("id").removeAttr("class");var r="";r=o||(""===window.ssw.login_redirect_url?location.pathname.indexOf("/account/")?location.href:location.protocol+"//"+location.hostname:window.ssw.login_redirect_url),i||(r=r.replace("https:","http:")),r=getUrlWithActiveLocale(r);var c="?checkout_url="+encodeURIComponent(r);if(""!==Shopify.recaptchaV3.siteKey)window.grecaptcha&&"function"==typeof window.grecaptcha.execute?t.addRecaptchaTokenAndSubmitForm(n,r,c,e,a):Ssw.gwAssetsLoader.require({url:storeFrontRecaptchaV3ScriptUrl,type:"SCRIPT"}).then((function(){t.addRecaptchaTokenAndSubmitForm(n,r,c,e,a)}));else if(n[0])t.prepareFormNode(n,r,c,e,a).submit()}},this.customerIdPage=function(s,e,o,t,i){var a=this;a.check_customer_count++,ssw.ajax({url:sswProxyUrl+"/lite2/auth/customeridpage",type:"POST",data:s,success:function(n){ssw.cookie("ssw-userchecked",0,{expires:-1});var r=ssw("<div>");if(r.html(n),parseInt(r.find("#ssw-customer-id").html()))a.redirectAfterAuth(e,o,t);else if(i&&a.check_customer_count<5)setTimeout((function(){a.customerIdPage(s,e,o,t,i)}),1e3);else if(!i){if(sswSocialLogin?trackShopStats("invalid_social_login","all"):trackShopStats("invalid_email_login","all"),hideLoginPopupLoader(),loginLoaderCancel(),ssw("#login_modal").sswModal("show"),sl)addMessage(ssw_message_selector,sswLangs.t("not_able_to_log_in_you_socially"),"warning");else{addMessage(ssw_message_selector,sswLangs.t("invalid_login_credentials"),"warning");var c=ssw("#ssw-customer-email").val();ssw.post(sswProxyUrl+"/lite2/auth/checkUserState",{email:c},(function(s){s&&(s.success?addMessage(ssw_message_selector,sswLangs.t("already_registered_and_sent_invite_message",{email:c}),"warning"):addMessage(ssw_message_selector,sswLangs.t("incorrect_credentials",[c]),"warning"))}),"json")}sl=0,ssw("#hesy-login-submit").removeAttr("disabled").attr("enabled","enabled")}},dataType:"html"})},this.multiPassLogin=function(){ssw.get(sswProxyUrl+"/lite2/auth/getMultipassToken",{_sid:ssw.cookie("hesid")},(function(s){s?ssw.get("/account/login/multipass/"+s,{},(function(s){if(ssw("<div>").html(s).find("#ssw_cid").val()){var e=sswGetParameterByName("checkout_url");e||(e=""===window.ssw.login_redirect_url?location.pathname.indexOf("/account/")?location.href:location.protocol+"//"+location.hostname:window.ssw.login_redirect_url),location.href.indexOf(location.host+"/"+Shopify.locale)>-1&&(e=e.indexOf(location.host)>-1?e.replace(location.host,location.host+"/"+Shopify.locale):"/"+Shopify.locale+e),location.href=e}else trackShopStats("invalid_social_login","all"),addMessage(ssw_message_selector,sswLangs.t("not_able_to_log_in_you_socially"),"warning"),hideLoginPopupLoader(),loginLoaderCancel(),ssw("#login_modal").sswModal("show")})).fail((function(){trackShopStats("invalid_social_login","all"),addMessage(ssw_message_selector,sswLangs.t("not_able_to_log_in_you_socially"),"warning"),hideLoginPopupLoader(),loginLoaderCancel(),ssw("#login_modal").sswModal("show")})):(trackShopStats("invalid_social_login","all"),addMessage(ssw_message_selector,sswLangs.t("not_able_to_log_in_you_socially"),"warning"),hideLoginPopupLoader(),loginLoaderCancel(),ssw("#login_modal").sswModal("show"))}))},this._login=function(s){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=this,t=e,i=ssw("#he_customer_login"),a=i.serializeArray(),n={_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token"),service_id:service_id};for(var r in a)a.hasOwnProperty(r);void 0!==sswCookie("cart")&&(n.cart_token=sswCookie("cart"));var c=sswGetParameterByName("checkout_url");if(""!=c){var l=c.split("/");n.form_type="customer_login",n.utf8="%E2%9C%93",n.checkout_url=encodeURIComponent(c),n.cart=l[l.length-1],n.customer={email:ssw("#ssw-customer-email").val(),password:ssw("#ssw-customer-password").val()}}var d="/account/login",w=ssw("#ssw-customer-password").val(),u=ssw("#ssw-customer-email").val(),p=new URLSearchParams(d);a.forEach((function(s){p.append(s.name,s.value)})),t&&p.append("recaptcha-v3-token",t),Object.keys(n).forEach((function(s){return p.append(s,n[s])})),s&&s.customer_id&&s.token&&s.customer&&s.customer.password&&s.customer.password_confirmation&&(d="/account/activate/"+s.customer_id+"/"+s.token,p=s,""!=c&&(p.checkout_url=encodeURIComponent(c)));var m=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i);if(m&&""!=c&&-1!=c.indexOf("checkout.shopify.com")){var h=i.clone();h.attr("id","ssw-login-clone-form"),h.css("display","none"),h.append('<input type="hidden" name="checkout_url" value="'+c+'"/>'),t&&h.append('<input type="hidden" name="recaptcha-v3-token" value="'.concat(t,'"/>')),ssw(document.body).append(h),h.submit()}else fetch(d,{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},body:p}).then((function(s){return Promise.all([s.text(),s.url])})).then((function(e){var t=_slicedToArray(e,2),r=t[0],l=t[1],d=ssw("<div>").html(r).find("#ssw_cid").val();if(0===d||"0"===d)if(l.includes("/challenge")&&ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/encrypt",data:{password:w},success:function(s){if(void 0!==s.new_password&&s.new_password&&"undefined"!=typeof localStorage)return localStorage.setItem("challenge_password",s.new_password),void(location.href="/challenge")},dataType:"json"}).fail((function(s){location.href="/challenge"})),sl||sswSocialLogin||s&&s.service){if(s&&s.verified&&_typeof(window.ssw.usercheckResponse.multipass_enabled)&&window.ssw.usercheckResponse.multipass_enabled)return void o.multiPassLogin();o.redirectAfterAuth(i,a,c),hideLoginPopupLoader()}else trackShopStats("invalid_email_login","all"),addMessage(ssw_message_selector,sswLangs.t("invalid_login_credentials"),"warning"),ssw.post(sswProxyUrl+"/lite2/auth/checkUserState",{email:u},(function(s){s.success?addMessage(ssw_message_selector,sswLangs.t("already_registered_and_sent_invite_message",{email:u}),"warning"):addMessage(ssw_message_selector,sswLangs.t("incorrect_credentials",[u]),"warning")}),"json"),o.redirectAfterAuth(i,a,c),hideLoginPopupLoader(),loginLoaderCancel();else{var p=new Date;n.customer_timezone_offset=-1*p.getTimezoneOffset()*60,n.customer={email:u,password:w},ssw.post(sswProxyUrl+"/lite2/auth/login",n,(function(s){s.error&&(sswSocialLogin?trackShopStats("invalid_social_login","all"):trackShopStats("invalid_email_login","all")),o.redirectAfterAuth(i,a,c)}))}})),-1!=navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&setTimeout((function(){o.customerIdPage(n,i,a,c,!0)}),1e3)},this.login=function(s){var e=this;hideLoginPopupLoader(),loginLoader(),""!==Shopify.recaptchaV3.siteKey?window.grecaptcha&&"function"==typeof window.grecaptcha.execute?window.grecaptcha.execute(window.Shopify.recaptchaV3.siteKey,{action:"customer_login"}).then((function(o){e._login(s,o)})):Ssw.gwAssetsLoader.require({url:storeFrontRecaptchaV3ScriptUrl,type:"SCRIPT"}).then((function(){window.grecaptcha.execute(window.Shopify.recaptchaV3.siteKey,{action:"customer_login"}).then((function(o){e._login(s,o)}))})):e._login(s)},this._signUp=function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=new URLSearchParams(e),i=ssw("#he_create_customer"),a=i.find('input[type="password"]').val(),n=ssw("#he_customer_login"),r=i.serializeArray(),c={_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),service_id:service_id},l=sswGetParameterByName("checkout_url");if(""!=l){var d=l.split("/");c.form_type="customer_login",c.utf8="%E2%9C%93",c.checkout_url=encodeURIComponent(l),c.cart=d[d.length-1]}r.forEach((function(s){t.append(s.name,s.value)})),Object.keys(c).forEach((function(s){return t.append(s,c[s])})),s&&t.append("recaptcha-v3-token",s),showLoginPopupLoader(),ssw("#hesy-sign-up-submit").removeAttr("enabled").attr("disabled","disabled"),ssw("#signup_modal .ssw-alert").remove(),fetch(e,{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},body:t}).then((function(s){return Promise.all([s.text(),s.url])})).then((function(s){var e=_slicedToArray(s,2),i=e[0],c=e[1],d=ssw("<div>").html(i),w=d.find(".errors li");0===w.length&&(w=d.find(".errors-list li")),0===w.length&&(w=d.find("#create_customer .note.form-error li")),w.length?(hideLoginPopupLoader(),ssw("#hesy-sign-up-submit").removeAttr("disabled").attr("enabled","enabled"),w.each((function(){addMessage("#signup_modal .login-failed",ssw(this).text(),"warning"),addMessage('form[action$="/account"]:not(#he_create_customer)',ssw(this).text(),"warning")}))):c.includes("/challenge")?ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/encrypt",data:{password:a},success:function(s){void 0!==s.new_password&&s.new_password&&"undefined"!=typeof localStorage&&(localStorage.setItem("challenge_password",s.new_password),location.href="/challenge")},dataType:"json"}).fail((function(s){location.href="/challenge"})):ssw.post(sswProxyUrl+"/lite2/auth/register",t.toString(),(function(s){ssw(document).trigger("sswOnCustomerSignedUp",s),""!=l?o.redirectAfterAuth(n,r,l):0===s.error?(ssw.cookie("ssw-userchecked",0,{expires:-1}),o.redirectAfterAuth(n,r)):ssw(".login-failed").empty()}),"json")})).catch((function(s){if(parseInt(s.status)>400){hideLoginPopupLoader();var e=ssw("<div>").html(s.responseText).find("div.content > div.content--block:nth-child(2) > div.content--desc").html();e=e||s.statusText,"Too many attempts: Please try again in 10 minutes"==ssw.trim(e)&&void 0!==sswLangs.data.too_many_attempts&&(e=sswLangs.data.too_many_attempts),addMessage("#signup_modal .login-failed",e,"warning"),addMessage('form[action$="/account"]:not(#he_create_customer)',e,"warning")}else ssw.ajax({url:sswProxyUrl+"/lite2/auth/customeridpage",success:function(s){ssw.cookie("ssw-userchecked",0,{expires:-1});var e=parseInt(ssw(s).text());e>0?(t.append("$customer_id",e),ssw.post(sswProxyUrl+"/lite2/auth/register",t.toString(),(function(s){""!=l?o.redirectAfterAuth(n,r,l):0===s.error?(ssw.cookie("ssw-userchecked",0,{expires:-1}),o.redirectAfterAuth(n,r)):ssw(".login-failed").empty()}),"json")):(hideLoginPopupLoader(),addMessage(sswLangs.t("email_is_already_associated")))},dataType:"html"})}))},this.signUp=function(){var s=this;hideLoginPopupLoader(),""!==Shopify.recaptchaV3.siteKey?window.grecaptcha&&"function"==typeof window.grecaptcha.execute?window.grecaptcha.execute(window.Shopify.recaptchaV3.siteKey,{action:"customer_login"}).then((function(e){s._signUp(e)})):Ssw.gwAssetsLoader.require({url:storeFrontRecaptchaV3ScriptUrl,type:"SCRIPT"}).then((function(){window.grecaptcha.execute(window.Shopify.recaptchaV3.siteKey,{action:"customer_login"}).then((function(e){s._signUp(e)}))})):s._signUp()}};void 0!==sswApp.default&&sswApp.default&&sswRun((function(){ssw(document).ready((function(){ssw(document).on("submit",'form[action$="/account"],form[action$="/account/login"]',(function(){var s=this.querySelector('input[name="customer[email]"]'),e=this.querySelector('input[name="customer[password]"]');s&&e&&(s.setAttribute("type","email"),s.setAttribute("required","required"),e.setAttribute("required","required"),function(s){var e=s.querySelector('input[name="customer[email]"]'),o=s.querySelector('input[name="customer[password]"]'),t=e.value,i=o.value,a=btoa(t);if(a&&(ssw.cookie("ssw_verify_token",sswMd5(i+a),{expires:30,path:"/",secure:"https:"===location.protocol,samesite:"https:"===location.protocol?"None":void 0}),"he_customer_login"!==s.id&&"he_create_customer"!==s.id)){var n=btoa(btoa(btoa(i).split("").reverse().join("")).split("").reverse().join("")).split("").reverse().join("");localStorage.setItem(a,n)}}(this))}));var s=document.querySelector('form[action="/account/recover"]');if(s){var e=s.querySelector('input[name="email"]');e&&e.setAttribute("type","email"),s.addEventListener("submit",(function(e){s._passWasUnset||(e.preventDefault(),e.stopPropagation());var o=s.querySelector('input[name="email"]').value;o&&ssw.ajax({url:sswProxyUrl+"/lite2/auth/unsetpass",type:"POST",data:{email:o},dataType:"json",success:function(){s._passWasUnset=!0,s.submit()},error:function(){s._passWasUnset=!0,s.submit()}})}))}var o=document.querySelector('form[action$="/account/reset"]');if(o){var t=location.pathname.split("/account/reset/"),i=t.length>1&&t[1].split("/")[0];i&&o.addEventListener("submit",(function(s){var e=o.querySelector('input[name="customer[password]"]'),t=o.querySelector('input[name="customer[password_confirmation]"]'),a=!(!e.value||!t.value||e.value!==t.value)&&t.value;if(a){var n="function"==typeof window.btoa;ssw.ajax({url:sswProxyUrl+"/lite2/auth/resetpass",type:"POST",async:!1,data:{customer_id:i,new_token:n?window.btoa(a):a,encoded:n},dataType:"json"})}}))}}))})),window.addEventListener("sswoauthcallback",(function(s){if(s.detail)if("amazon"===s.detail.service)ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/azshopcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")},success:function(s){if(void 0!==s.service_id&&(service_id=s.service_id),sswSocialLogin=1,ssw.isEmptyObject(s))hideLoginPopupLoader();else if(s.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==s.new&&1===s.new)showAcceptTermsForm(s);else if("enabled"!=s.state){if(s.password&&s.email)(e=new ShopifyLogin).preLogin(s.email,s.password),s.account_activation_token?e.login({customer_id:s.customer_id,token:s.account_activation_token,verified:s.verified,customer:{password:s.password,password_confirmation:s.password}}):e.login({verified:s.verified});else targetSEMModal(s,"Amazon")}else{var e;if(!s.password&&s.email)targetSEMModal(s,"Amazon");else if(s.password)(e=new ShopifyLogin).preLogin(s.email,s.password),e.login({verified:s.verified});else if(_typeof(window.ssw.usercheckResponse.multipass_enabled)&&window.ssw.usercheckResponse.multipass_enabled)(e=new ShopifyLogin).multiPassLogin();else addMessage(ssw_message_selector,"sswLangs.t('already_registered_to_social_service2', {email: response.email})","warning"),ssw("#login_modal").sswModal()}},dataType:"json"});else if("yahoo"===s.detail.service)ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/yshopcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")},success:function(s){if(sswSocialLogin=1,void 0!==s.service_id&&(service_id=s.service_id),ssw.isEmptyObject(s))hideLoginPopupLoader();else if(s.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==s.new&&1===s.new)showAcceptTermsForm(s);else if("enabled"!=s.state){if(s.password&&s.email)(e=new ShopifyLogin).preLogin(s.email,s.password),s.account_activation_token?e.login({customer_id:s.customer_id,token:s.account_activation_token,customer:{password:s.password,password_confirmation:s.password}}):e.login({verified:s.verified});else targetSEMModal(s,"Yahoo")}else{var e;if(!s.password&&s.email)targetSEMModal(s,"Yahoo");else if(s.password)(e=new ShopifyLogin).preLogin(s.email,s.password),e.login({verified:s.verified});else if(_typeof(window.ssw.usercheckResponse.multipass_enabled)&&window.ssw.usercheckResponse.multipass_enabled)(e=new ShopifyLogin).multiPassLogin();else addMessage(ssw_message_selector,sswLangs.t("already_registered_to_social_service2",{email:s.email}),"warning"),ssw("#login_modal").sswModal()}},dataType:"json"});else if("line"===s.detail.service){var e=s.detail.service;ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/lshopcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token"),service:e},success:function(s){var o;sswSocialLogin=1,void 0!==s.service_id&&(service_id=s.service_id),ssw.isEmptyObject(s)?hideLoginPopupLoader():s.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==s.new&&1===s.new?showAcceptTermsForm(s):s.password?s.isOldCustomer?targetSEMModal(s,e):((o=new ShopifyLogin).preLogin(s.email,s.password),o.login({verified:s.verified})):void 0!==s.user_id&&s.user_id&&_typeof(window.ssw.usercheckResponse.multipass_enabled)&&window.ssw.usercheckResponse.multipass_enabled?(o=new ShopifyLogin).multiPassLogin():(hideLoginPopupLoader(),ssw("#service_id").val(s.service_id),ssw(".ssw-modal").sswModal("hide"),s.email?targetSEMModal(s,e):ssw("#set-email-modal").sswModal())},dataType:"json"})}})),sswLibraryLoaded((function(){window.sswHelperLoaded?validateLogin():window.addEventListener("sswhelperload",validateLogin),ssw(document).on("click",".ssw-azconnect",(function(){showLoginPopupLoader();var s=HE_DOMAIN+"/lite2/auth/azconnect?_sid="+ssw.cookie("hesid")+"&shop="+encodeURIComponent("https://"+Shopify.shop);sswIsWebView()?(s+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=s):ssw.oauthpopup({path:s,windowOptions:sswGetPopupBounds(710,550),callback:function(){sswDispatchEvent("sswoauthcallback",{detail:{service:"amazon"},bubbles:!0,cancellable:!1})}})})),ssw(document).on("click",".ssw-yconnect",(function(){showLoginPopupLoader();var s=HE_DOMAIN+"/lite2/auth/yconnect?_sid="+ssw.cookie("hesid")+"&shop="+encodeURIComponent(Shopify.shop);sswIsWebView()?(s+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=s):ssw.oauthpopup({path:s,callback:function(){sswDispatchEvent("sswoauthcallback",{detail:{service:"yahoo"},bubbles:!0,cancellable:!1})}})})),ssw(document).on("click",".ssw-line-connect ",(function(){showLoginPopupLoader();var s=HE_DOMAIN+"/lite2/auth/lconnect?_sid="+ssw.cookie("hesid")+"&shop="+encodeURIComponent(Shopify.shop);sswIsWebView()?(s+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=s):ssw.oauthpopup({path:s,callback:function(){sswDispatchEvent("sswoauthcallback",{detail:{service:"line"},bubbles:!0,cancellable:!1})}})})),ssw(document).on("click",".ssw-twconnect",(function(){shopCallback4TTI("twconnect","twitter")})),ssw(document).on("click",".ssw-inconnect",(function(){shopCallback4TTI("inconnect","instagram")})),ssw(document).on("click",".ssw-tmconnect",(function(){shopCallback4TTI("tmconnect","tumblr")})),ssw(document).on("keyup change","#he_create_customer input",(function(){""!=ssw("#he_create_customer #ssw-email").val()&&""!=ssw("#he_create_customer #ssw-password").val()&&(ssw("#he_create_customer .ssw-first-name:hidden").length?ssw("#he_create_customer .ssw-first-name").slideDown():""!=ssw("#he_create_customer #ssw-first_name").val()&&ssw("#he_create_customer .ssw-last-name:hidden").length&&ssw("#he_create_customer .ssw-last-name").slideDown())})),ssw(document).on("shown.ssw.modal","#login_modal",(function(){ssw(document.body).hasClass("ssw-touch")||ssw("#ssw-customer-email").focus()})),ssw(document).on("show.ssw.modal","#login_modal",(function(){ssw(".ssw-modal:not(#login_modal)").sswModal("hide")})),ssw(document).on("shown.ssw.modal","#signup_modal",(function(){ssw(document.body).hasClass("ssw-touch")||ssw("#he_create_customer input").each((function(s,e){if(""===ssw(e).val())return ssw(e).focus(),!1}))}))})),sswUserChecked((function(){function s(){var s=ssw.usercheckResponse;s.termsSignup&&(ssw("#ssw-signup-accept-terms").show().find('input[type="checkbox"]').attr("required","required"),ssw(".ssw-accept-terms").show(),s.termsLink&&(ssw("#ssw-signup-accept-terms-marketing .terms-link").attr("href",s.termsLink).show(),ssw("#ssw-signup-accept-terms-marketing .terms-span").hide(),ssw(".ssw-accept-wrapper .terms-link").attr("href",s.termsLink).show(),ssw(".ssw-accept-wrapper .terms-span").hide()))}window.sswHelperLoaded?s():window.addEventListener("sswhelperload",s)}))}function gwLoginCritical(s){if("undefined"!=typeof sswJqLoaded&&sswJqLoaded){if(window.addEventListener("sswoauthcallback",(function(s){s.detail&&"facebook"===s.detail.service&&ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/fshopcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")},success:function(s){if(void 0!==s.service_id&&(service_id=s.service_id),sswSocialLogin=1,ssw.isEmptyObject(s))hideLoginPopupLoader();else if(s.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==s.new&&1===s.new)showAcceptTermsForm(s);else if("enabled"!=s.state){if(s.password&&s.email)(e=new ShopifyLogin).preLogin(s.email,s.password),s.account_activation_token?e.login({customer_id:s.customer_id,token:s.account_activation_token,customer:{password:s.password,password_confirmation:s.password}}):e.login();else targetSEMModal(s,"Facebook")}else{var e;if(!s.password&&s.email)targetSEMModal(s,"Facebook");else if(s.email)if(s.password)(e=new ShopifyLogin).preLogin(s.email,s.password),e.login();else addMessage("#login_modal .login-failed","sswLangs.t('already_registered_to_social_service2', {email: response.email})","warning"),ssw("#login_modal").sswModal();else hideLoginPopupLoader(),ssw("#service_id").val(s.service_id),ssw(".ssw-modal").sswModal("hide"),ssw("#set-email-modal").sswModal()}},dataType:"json"})})),1===s.ourFacebookApp)ssw(document).on("click",".ssw-fbconnect",(function(){showLoginPopupLoader();var s=HE_DOMAIN+"/lite2/auth/fconnect?_sid="+ssw.cookie("hesid")+"&shop="+encodeURIComponent(Shopify.shop);sswIsWebView()?(s+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=s):ssw.oauthpopup({path:s,windowOptions:window.screen.width>650?"width=650,height=500":null,callback:function(){sswDispatchEvent("sswoauthcallback",{detail:{service:"facebook"},bubbles:!0,cancellable:!1})}})}));else{var e=setInterval((function(){window.FB&&FB.getLoginStatus&&(clearInterval(e),console.info("FB JS SDK is loaded"),setTimeout((function(){FB.getLoginStatus((function(s){window.sswFbLoginStatusResponse=s}),1)}),300))}),100);ssw(document).on("click",".ssw-fbconnect",(function(){showLoginPopupLoader(),clearInterval(window.ssw_fb_login_status_interv),window.ssw_fb_login_status_interv=setInterval((function(){if(window.sswFbLoginStatusResponse){clearInterval(window.ssw_fb_login_status_interv);var s=window.sswFbLoginStatusResponse;"connected"===s.status?serviceUserChecker(s,"facebook"):(s.status,FB.login((function(s){s.authResponse?serviceUserChecker(s,"facebook"):hideLoginPopupLoader()}),{scope:"email"},1))}}),100)}))}window.addEventListener("sswoauthcallback",(function(s){s.detail&&"gplus"===s.detail.service&&ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/gcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")},success:function(s){if(sswSocialLogin=1,void 0!==s.service_id&&(service_id=s.service_id),ssw.isEmptyObject(s))hideLoginPopupLoader();else if(s.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==s.new&&1===s.new)showAcceptTermsForm(s);else if("enabled"!=s.state){if(s.password&&s.email)(e=new ShopifyLogin).preLogin(s.email,s.password),s.account_activation_token?e.login({customer_id:s.customer_id,token:s.account_activation_token,verified:s.verified,service:"gplus",customer:{password:s.password,password_confirmation:s.password}}):e.login({verified:s.verified,service:"gplus"});else targetSEMModal(s,"gplus")}else{var e;if(!s.password&&s.email)targetSEMModal(s,"gplus");else if(s.password)(e=new ShopifyLogin).preLogin(s.email,s.password),e.login({verified:s.verified,service:"gplus"});else addMessage("#login_modal .login-failed","sswLangs.t('already_registered_to_social_service2', {email: response.email})","warning"),ssw("#login_modal").sswModal()}},dataType:"json"})}));var o={},t=!1;1===s.ourGoogleApp?ssw(document).on("click",".ssw-gconnect",(function(){if(showLoginPopupLoader(),!t){t=!0;var s=HE_DOMAIN+"/lite2/auth/gconnect?_sid="+ssw.cookie("hesid")+"&shop="+encodeURIComponent(Shopify.shop);sswIsWebView()?(s+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=s):ssw.oauthpopup({path:HE_DOMAIN+"/lite2/auth/gconnect?_sid="+ssw.cookie("hesid")+"&shop="+Shopify.shop,windowOptions:window.screen.width>470?"width=400,height=550":null,callback:function(){t=!1,sswDispatchEvent("sswoauthcallback",{detail:{service:"gplus"},bubbles:!0,cancellable:!1})}})}})):(window.gwGapiLoad=function(){gapi.load("auth2",(function(){var s=setInterval((function(){if(document.querySelector(".ssw-gconnect")){clearInterval(s);for(var e=gapi.auth2.init({cookiepolicy:"single_host_origin"}),t=document.querySelectorAll(".ssw-gconnect"),i=t.length,a=function(s){if(hideLoginPopupLoader(),s&&s.isSignedIn()){o={access_token:s.getAuthResponse().access_token},profile=s.getBasicProfile();var e={first_name:profile.getGivenName(),last_name:profile.getFamilyName(),about:profile.aboutMe,image:profile.getImageUrl(),url:"",email:profile.getEmail(),user_id:profile.getId(),service:"gplus"};o=ssw.extend(o,e),ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/service",data:{user_id:o.user_id,email:o.email,service:"gplus",access_token:o.access_token,_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key")},success:function(s){var e=new ShopifyLogin;void 0!==s.service_id&&(service_id=s.service_id),s.status?"enabled"===s.state&&s.password?(e.preLogin(s.email,s.password),e.login({verified:s.verified,service:"gplus"})):"enabled"!=s.state&&s.password&&s.email?(e.preLogin(s.email,s.password),s.account_activation_token?e.login({customer_id:s.customer_id,token:s.account_activation_token,verified:s.verified,service:"gplus",customer:{password:s.password,password_confirmation:s.password}}):e.login({verified:s.verified,service:"gplus"})):targetSEMModal(s,"gplus"):s.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==s.new&&1===s.new?showAcceptTermsForm(s,"gplus",{gplusData:o,json:s}):e.setServiceUser({gplusData:o,json:s},"gplus")},dataType:"json"})}else hideLoginPopupLoader()},n=function(s){hideLoginPopupLoader()},r=0;r<i;r++){var c=t[r];e.attachClickHandler(c,{},a,n)}}}),500)}))},window.gapi&&window.gwGapiLoad())}sswLibraryLoaded((function(){var s=sswIsOauthRedirectFrom();s&&(location.hash="",sswDispatchEvent("sswoauthcallback",{detail:{service:s},bubbles:!0,cancellable:!1}))}));ssw(document.body).on("show.ssw.modal","#login_modal,#signup_modal",(function s(e){showLoginPopupLoader();var o=Ssw.gwAssetsManifestLoader;Promise.all([o.requireByKey("login.main.css","STYLE"),o.requireByKey("login.main.js","SCRIPT"),o.requireByKey("core.library.js","SCRIPT")]).then((function(){hideLoginPopupLoader()})),ssw(document.body).off("show.ssw.modal","#login_modal,#signup_modal",s)}))}"undefined"==typeof Ssw&&(Ssw={}),Ssw.Login={options:{autoIntegrateLinks:!0,autoIntegrateIcons:!0},init:function(s){"object"===_typeof(s)&&(this.options=s),this.changeAuthFormsActions(),this.showForm(),this.bindEvents(),"function"==typeof Ssw.gwAssetsLoader.require&&ssw(".ssw-socialconnect.social_networks_icon_for_dropdown").click((function(){Ssw.gwAssetsLoader.require({url:storeFrontRecaptchaV3ScriptUrl,type:"SCRIPT"}),ssw(".ssw-socialconnect.social_networks_icon_for_dropdown").unbind("click")}))},bindEvents:function(){var s=this;ssw(window).ready((function(){s.options.autoIntegrateLinks&&s.autoIntegrateLinks(),s.options.autoIntegrateIcons&&s.autoIntegrateIcons(),ssw(document.body).on("click",".customer_login_link",(function(){return ssw("#login_modal").sswModal(),trackShopStats("login_popup_view","all"),!1}))})),void 0===sswApp.customer&&s.dropdownLoginForm()},showForm:function(){if("undefined"!=typeof sswAutoShowLogin&&sswAutoShowLogin&&"/pages/share-review"!=location.pathname&&!ssw(".fancybox-overlay:visible").length){var s=+new Date,e=parseInt(ssw.cookie("sswautoshow_login"));if(isNaN(e)||s-e>864e5){var o="undefined"!=typeof sswAutoShowDelay?1e3*sswAutoShowDelay:5e3;setTimeout((function(){ssw("#signup_modal:visible").length||ssw("#login_modal:visible").length||("function"==typeof sswCustomShowLoginFunction?sswCustomShowLoginFunction():ssw("#signup_modal").sswModal("show")),ssw.cookie("sswautoshow_login",+new Date,{path:"/",secure:"https:"===location.protocol,samesite:"Lax"})}),o)}}},autoIntegrateLinks:function(){var s=ssw('a[href="/account/login"]');s&&s.length>0&&s.attr({"data-target":"#login_modal","data-toggle":"ssw-modal",href:"javascript://"});var e=ssw('a[href="/account/register"]');e&&e.length>0&&e.attr({"data-target":"#signup_modal","data-toggle":"ssw-modal",href:"javascript://"});var o=setInterval((function(){var s=ssw('a[href="/account"]:visible'),e=ssw("#ssw-topauth");s&&s.length>0&&s.parent()&&"customer_myorders_li"!=s.parent().attr("id")&&e&&e.length>0&&0!=e.children().length&&(clearInterval(o),s.hide().after(e.clone()))}),100)},validateSignUpForm:function(s){var e=s.find(".ssw-accept-terms__input")[0].checked,o=s.find(".ssw-accept-wrapper"),t=ssw.usercheckResponse.termsSignup;if(!e&&t)return o.addClass("ssw-error-accept-terms"),!1},autoIntegrateIcons:function(){sswAddEventListener("sswhelperload",(function(){if((0===location.pathname.indexOf("/account/login")||0===location.pathname.indexOf("/account/register"))&&!ssw("*:not(#ssw-login-social-icons-widget-wrapper) > .ssw-social-login-widget").length){var s,e,o=ssw('form[action$="/account/login"]:not(#he_customer_login, #customer_login_guest, .ssw-auth-dropdown form)'),t=ssw('form[action$="/account"]:not(#he_create_customer)'),i=ssw("#ssw-login-social-icons-widget-wrapper").find(".ssw-social-login-widget"),a=ssw("#ssw-login-social-icons-widget-wrapper").find(".ssw-accept-wrapper"),n=ssw('form[action$="/account"]:not(#he_create_customer) input[name="customer[accepts_marketing]"]');if(a.show(),"function"==typeof sswCustomAutoIntegrateIcons)sswCustomAutoIntegrateIcons(i);else if(o.length?s=o:t.length&&n.length?(s=t.find('input[name="customer[first_name]"]'),e=t.find('input[name="customer[password]"]'),ssw("#ssw-login-social-icons-widget-wrapper").find(".ssw-accept-marketing").remove()):t.length&&(s=t,e=t.find('input[name="customer[password]"]')),s&&s.length){var r,c=s.attr("id");if(c&&(r=ssw('label[for="'+c+'"]')).length&&(s=r),!r||!r.length){var l=s.parents().has("customer[first_name]"==s.attr("name")?t.find('input[name="customer[password]"]'):o.find('input[name="customer[password]"]')).first().children().has(s).first();l.length&&(s=l)}i.insertBefore(s),a.insertAfter(e),t.length&&t.submit((function(){return Ssw.Login.validateSignUpForm(t)}))}}}))},changeAuthFormsActions:function(){var s=ssw("#he_customer_login"),e=ssw("#he_create_customer"),o=s.attr("action"),t=e.attr("action");o&&-1===o.indexOf(location.hostname)&&s.attr("action",["https://",location.hostname,o].join("")),t&&-1===t.indexOf(location.hostname)&&e.attr("action",["https://",location.hostname,t].join(""))},resetAcceptTermsForm:function(){ssw("#ssw-accept-terms-checkbox").checked(!0),ssw("#ssw-accept-marketing-checkbox").checked(!0),ssw("#terms-email-input").val(""),ssw(".terms-email-group").show(),ssw(".accept_terms-group").show(),ssw(".accepts_marketing-group").show(),ssw("#ssw-cancel-account-button").hide(),ssw("#ssw-create-account-button").show()},setDropdownPosition:function(){ssw(".ssw-auth-dropdown").is(":visible")&&ssw(".ssw-auth-dropdown .ssw-dropdown-toggle").length&&(ssw(".ssw-auth-dropdown .ssw-dropdown-toggle").offset().left>ssw(window).width()/2?ssw(".ssw-auth-dropdown .ssw-dropdown-menu").hasClass("ssw-pull-right")||ssw(".ssw-auth-dropdown .ssw-dropdown-menu").addClass("ssw-pull-right"):ssw(".ssw-auth-dropdown .ssw-dropdown-menu").removeClass("ssw-pull-right"))},isElementInView:function(s,e){var o=ssw(window).scrollTop(),t=o+ssw(window).height(),i=s.offset().top,a=i+s.outerHeight();return!0===e?o<i&&t>a:i<=t&&a>=o},dropdownLoginForm:function(){var s=this;ssw(document.body).on("show.ssw.dropdown","span.ssw-dropdown",(function(s){ssw(window).width()<500&&(s.preventDefault(),ssw("#login_modal").sswModal("show"))})),ssw(document.body).on("show.ssw.modal","#login_modal",(function(e){ssw(window).width()<500||ssw(".ssw-auth-dropdown").is(":visible")&&!ssw("#ssw-community-box").is(":visible")&&(e.preventDefault(),setTimeout((function(){ssw(".ssw-auth-dropdown .ssw-auth-dropdown-message").html(ssw("#login_modal .login-failed").html()),ssw(".ssw-auth-dropdown .ssw-dropdown").hasClass("ssw-open")||(ssw(".ssw-auth-dropdown .ssw-dropdown").addClass("ssw-open"),Ssw.RewardPopup&&Ssw.RewardPopup.hidePopup&&Ssw.RewardPopup.hidePopup()),s.isElementInView(ssw(".ssw-auth-dropdown .ssw-dropdown-menu"),!0)||ssw(window).scrollTop(ssw(".ssw-auth-dropdown .ssw-dropdown-toggle").offset().top-20)}),100))})),s.setDropdownPosition(),ssw(window).resize((function(){s.setDropdownPosition()})),ssw(window).bind("orientationchange",(function(){s.setDropdownPosition()})),ssw(document.body).on("submit",'form[action="/account/login"]',(function(){ssw(this).closest(".ssw-auth-dropdown").length?localStorage.setItem("ssw_before_submit_login_url",location.href):localStorage.removeItem("ssw_before_submit_login_url")})),sswUserChecked((function(){!function(){if(null!=localStorage.getItem("ssw_before_submit_login_url")&&"/account"===location.pathname){var s=localStorage.getItem("ssw_before_submit_login_url");localStorage.removeItem("ssw_before_submit_login_url"),window.ssw.login_redirect_url?location.href=window.ssw.login_redirect_url:location.href=s}}()}))}},sswRun((function(s){Ssw.Login.init({autoIntegrateLinks:"undefined"!=typeof sswAutoIntegrate&&sswAutoIntegrate,autoIntegrateIcons:!0})}));